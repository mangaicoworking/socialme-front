/*GainTime BR-validator v1.0.0*/
function preformat(e,t){var a=t?e.textContent:e.value,r=a,n=t||e.dataset.validate;if(a){switch(n){case"cpf":r=preformatCpf(a);break;case"cnpj":r=preformatCnpj(a);break;case"brPhone":r=preformatPhone(a);break;case"cep":r=preformatCep(a);break;case"date":r=preformatDate(a)}t&&(e.innerHTML=r),e.value=r}else t?e.textContent="":e.value=""}function formater(e){preformat(e),e.addEventListener("keyup",function(t){switch(e.dataset.validate){case"date":isPaste(e,t)?preformat(e):formatDate(e,t);break;default:isPaste(e,t)&&preformat(e)}}),e.addEventListener("keydown",function(t){switch(e.dataset.validate){case"cpf":formatCpf(e,t);break;case"cnpj":formatCnpj(e,t);break;case"brPhone":formatBrPhone(e,t);break;case"cep":formatCep(e,t);break;case"date":case"num":onlyNumbers(t);break;case"text":blockNum(t)}})}function isPaste(e,t){return t.ctrlKey&&86==t.keyCode}function onlyNumbers(e){if(isNaN(e.key)&&ctrlButtons(e)&&!e.ctrlKey&&"Tab"!=e.key&&"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"ArrowDown"!=e.key&&"ArrowUp"!=e.key&&"Enter"!=e.key||" "==e.key)return e.preventDefault(),!1}function blockNum(e){if(!isNaN(e.key)&&0!=e.keyCode&&8!=e.keyCode&&46!=e.keyCode&&!e.ctrlKey&&"Tab"!=e.key&&"ArrowLeft"!=e.key&&"ArrowRight"!=e.key&&"ArrowDown"!=e.key&&"ArrowUp"!=e.key&&"Enter"!=e.key&&" "!=e.key)return e.preventDefault(),!1}function ctrlButtons(e){return 0!=e.keyCode&&8!=e.keyCode&&46!=e.keyCode}function preformatPhone(e){var t=(""+e).replace(/\D/g,"");t.length<=10?m=t.match(/^(\d{1,2})?[- ]?(\d{1,4})?(\d{1,4})?(.*)?$/):m=t.match(/^(\d{1,2})?[- ]?(\d{1,5})?(\d{1,4})?(.*)?$/);for(var a=1;a<=3;a++)m[a]||(m[a]="");return m?"("+m[1]+") "+m[2]+"-"+m[3]:null}function preformatCpf(e){s2=(""+e).replace(/\D/g,""),m=s2.match(/^(\d{1,3})?[- ]??[\s]?(\d{1,3})?[\s]?(\d{1,3})?(.*)?$/);for(var t=1;t<=4;t++)m[t]||(m[t]="");return m?m[1]+"."+m[2]+"."+m[3]+"-"+m[4]:null}function preformatCnpj(e){s2=(""+e).replace(/\D/g,""),m=s2.match(/^(\d{1,2})?[- ]??[\s]?(\d{1,3})?[\s]?(\d{1,3})?(\d{1,4})?(\d{1,2})?(.*)?$/);for(var t=1;t<=5;t++)m[t]||(m[t]="");return m?m[1]+"."+m[2]+"."+m[3]+"/"+m[4]+"-"+m[5]:null}function preformatCep(e){s2=(""+e).replace(/\D/g,""),m=s2.match(/^(\d{1,5})?[- ]??[\s]?(\d{1,3})?(.*)?$/);for(var t=1;t<=2;t++)m[t]||(m[t]="");return m?m[1]+"-"+m[2]:null}function preformatDate(e){s2=(""+e).replace(/\D/g,""),m=s2.match(/^(\d{1,2})?[- ]??[\s]?(\d{1,2})?(.*)?$/);for(var t=1;t<=3;t++)m[t]||(m[t]="");return m?m[1]+"/"+m[2]+"/"+m[3]:null}function formatCpf(e,t){onlyNumbers(t),ctrlButtons(t)&&(3!=e.value.length&&7!=e.value.length||(e.value=e.value+"."),11==e.value.length&&(e.value=e.value+"-"))}function formatCnpj(e,t){onlyNumbers(t),ctrlButtons(t)&&(2!=e.value.length&&6!=e.value.length||(e.value=e.value+"."),10==e.value.length&&(e.value=e.value+"/"),15==e.value.length&&(e.value=e.value+"-"))}function formatBrPhone(e,t){onlyNumbers(t),ctrlButtons(t)&&(0!=e.value.length&&e.selectionStart>1||"Tab"==t.key||"Enter"==t.key||t.ctrlKey||(e.value="("),"9"==e.value[5]&&10==e.value.length&&(e.value=e.value+"-"),"9"!=e.value[5]&&9==e.value.length&&(e.value=e.value+"-"),3!=e.value.length||(e.value=e.value+") "))}function formatCep(e,t){onlyNumbers(t),ctrlButtons(t)&&(5!=e.value.length||(e.value=e.value+"-"))}function formatDate(e,t){onlyNumbers(t),ctrlButtons(t)&&(2!=e.value.length&&5!=e.value.length||(e.value=e.value+"/"))}function validates(e){e.addEventListener("blur",function(t){formater(e),switchValidations(e)})}function switchValidations(e){switch(e.dataset.validate){case"text":searcher(e,/^[a-zA-ZÃẼĨÕŨãẽĩõũÁÉÍÓÚáéíóúÂÊÎÔÛâêîôûÀÈÌÒÙàèìòùÄËÏÖÜäëïöü' ]*$/);break;case"num":searcher(e,/^[\d]*$/g);break;case"cpf":validateCpf(e.value)||""==e.value?validsIt(e):invalidsIt(e,"Este CPF é inválido.");break;case"cnpj":validateCnpj(e.value)||""==e.value?validsIt(e):invalidsIt(e,"Este CNPJ é inválido.");break;case"brPhone":validateBrPhone(e.value)||""==e.value?validsIt(e):invalidsIt(e,"Este Telefone é inválido.");break;case"date":validateDate(e.value)||""==e.value?validsIt(e):invalidsIt(e,"Esta data é inválida.");break;case"cep":break;default:searcher(e,new RegExp(e.dataset.validate))}}function invalidsIt(e,t){e.style.border="1px solid #F00",t?e.setCustomValidity(t):e.setCustomValidity("Invalid field.")}function validsIt(e){e.style.removeProperty("border"),e.setCustomValidity("")}function searcher(e,t){null==e.value.match(t)?invalidsIt(e,!1):validsIt(e)}function validateBrPhone(e){var t=e.replace(/\D/g,"");if(!(t.length>=10&&t.length<=11)||11==t.length&&9!=parseInt(t.substring(2,3)))return!1;return!(-1==[11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,41,42,43,44,45,46,47,48,49,51,53,54,55,61,62,64,63,65,66,67,68,69,71,73,74,75,77,79,81,82,83,84,85,86,87,88,89,91,92,93,94,95,96,97,98,99].indexOf(parseInt(t.substring(0,2))))}function validateDate(e){var t=e.replace(/\D/g,""),a=parseInt(t.substring(0,2)),r=parseInt(t.substring(2,4)),n=parseInt(t.substring(4));if(a>30&&(4==r||6==r||9==r||11==r))return!1;if(2==r)if(n%4!=0||n%100==0&&n%400!=0){if(a>28)return!1}else if(a>29)return!1;return!(t.length<5||r>12||a>31||a<1)&&1}function validateCpf(e){var t,a,r=e.replace(/\./g,"");if(t=0,"00000000000"==(r=r.replace(/\-/g,"")))return!1;for(i=1;i<=9;i++)t+=parseInt(r.substring(i-1,i))*(11-i);if(10!=(a=10*t%11)&&11!=a||(a=0),a!=parseInt(r.substring(9,10)))return!1;for(t=0,i=1;i<=10;i++)t+=parseInt(r.substring(i-1,i))*(12-i);return 10!=(a=10*t%11)&&11!=a||(a=0),a==parseInt(r.substring(10,11))}function validateCnpj(e){if(""==(e=e.replace(/[^\d]+/g,"")))return!1;if(14!=e.length)return!1;if("00000000000000"==e||"11111111111111"==e||"22222222222222"==e||"33333333333333"==e||"44444444444444"==e||"55555555555555"==e||"66666666666666"==e||"77777777777777"==e||"88888888888888"==e||"99999999999999"==e)return!1;for(n=e.substring(0,12),d=e.substring(12),t=12,s=0,p=5,i=t;i>=1;i--)s+=n.charAt(t-i)*p--,p<2&&(p=9);if(r=s%11<2?0:11-s%11,r!=d.charAt(0))return!1;for(n=e.substring(0,13),t=13,s=0,p=6,i=t;i>=1;i--)s+=n.charAt(t-i)*p--,p<2&&(p=9);return r=s%11<2?0:11-s%11,r==d.charAt(1)}function viacep(e,t){var a,r=e.value.replace(/[^0-9]/,"");if(""!=r){8!=r.length&&(invalidsIt(e,"Este CEP é inválido."),console.log("OI"),t({erro:!0}));var n="https://viacep.com.br/ws/"+r+"/json/",l=new XMLHttpRequest;l.onreadystatechange=function(){4==this.readyState&&200==this.status&&((a=JSON.parse(this.responseText)).erro?invalidsIt(e,"Este CEP é inválido."):validsIt(e),t(a))},l.open("GET",n,!0),l.send()}else validsIt(e)}var toValidate=[].slice.call(document.querySelectorAll("[data-validate]")),ceps=[].slice.call(document.querySelectorAll("[data-validate=cep]"));toValidate.forEach(function(e){formater(e),validates(e),switchValidations(e)});
